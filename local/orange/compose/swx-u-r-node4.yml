version: "3.3"

volumes:
  nerdherdvpn-data:
    driver: local

services:

  nerdherdvpn:
    build: tinc/
    image: sofwerx/tinc
    container_name: nerdherdvpn
    network_mode: host
    devices:
      - /dev/net/tun
    cap_add:
      - NET_ADMIN
    volumes:
      - nerdherdvpn-data:/etc/tinc
    restart: always
    ports:
      - "655:655"
      - "655:655/udp"
    environment:
      NETNAME: nerdherd
      IP: 172.31.128.124
      SUBNET: 255.255.255.0
      TINC_IMPORT: ${TINC_IMPORT}
      TINC_CONNECT_TO: ${TINC_CONNECT_TO}

